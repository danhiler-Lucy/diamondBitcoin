function smartSearchManager(){
    this.values={"rb":[{"category":"model","subCategory":null,"role":null,"mainValue":"rb"}],"round":[{"category":"model","subCategory":null,"role":null,"mainValue":"rb"}],"ro":[{"category":"model","subCategory":null,"role":null,"mainValue":"rb"}],"rbc":[{"category":"model","subCategory":null,"role":null,"mainValue":"rb"}],"rd":[{"category":"model","subCategory":null,"role":null,"mainValue":"rb"}],"rnd":[{"category":"model","subCategory":null,"role":null,"mainValue":"rb"}],"cu":[{"category":"model","subCategory":null,"role":null,"mainValue":"cu"}],"cushion":[{"category":"model","subCategory":null,"role":null,"mainValue":"cu"}],"curb":[{"category":"model","subCategory":null,"role":null,"mainValue":"cu"}],"cumod":[{"category":"model","subCategory":null,"role":null,"mainValue":"cu"}],"ra":[{"category":"model","subCategory":null,"role":null,"mainValue":"ra"}],"radiant":[{"category":"model","subCategory":null,"role":null,"mainValue":"ra"}],"pr":[{"category":"model","subCategory":null,"role":null,"mainValue":"pr"}],"princess":[{"category":"model","subCategory":null,"role":null,"mainValue":"pr"}],"prn":[{"category":"model","subCategory":null,"role":null,"mainValue":"pr"}],"pn":[{"category":"model","subCategory":null,"role":null,"mainValue":"pr"}],"pc":[{"category":"model","subCategory":null,"role":null,"mainValue":"pr"}],"prin":[{"category":"model","subCategory":null,"role":null,"mainValue":"pr"}],"smb":[{"category":"model","subCategory":null,"role":null,"mainValue":"pr"}],"mdsqb":[{"category":"model","subCategory":null,"role":null,"mainValue":"pr"}],"ov":[{"category":"model","subCategory":null,"role":null,"mainValue":"ov"}],"oval":[{"category":"model","subCategory":null,"role":null,"mainValue":"ov"}],"omb":[{"category":"model","subCategory":null,"role":null,"mainValue":"ov"}],"mq":[{"category":"model","subCategory":null,"role":null,"mainValue":"mq"}],"marquis":[{"category":"model","subCategory":null,"role":null,"mainValue":"mq"}],"mqb":[{"category":"model","subCategory":null,"role":null,"mainValue":"mq"}],"hs":[{"category":"model","subCategory":null,"role":null,"mainValue":"hs"}],"heart":[{"category":"model","subCategory":null,"role":null,"mainValue":"hs"}],"ht":[{"category":"model","subCategory":null,"role":null,"mainValue":"hs"}],"mhrc":[{"category":"model","subCategory":null,"role":null,"mainValue":"hs"}],"em":[{"category":"model","subCategory":null,"role":null,"mainValue":"em"}],"emerald":[{"category":"model","subCategory":null,"role":null,"mainValue":"em"}],"ec":[{"category":"model","subCategory":null,"role":null,"mainValue":"em"}],"ps":[{"category":"model","subCategory":null,"role":null,"mainValue":"ps"}],"pear":[{"category":"model","subCategory":null,"role":null,"mainValue":"ps"}],"psh":[{"category":"model","subCategory":null,"role":null,"mainValue":"ps"}],"pb":[{"category":"model","subCategory":null,"role":null,"mainValue":"ps"}],"pm":[{"category":"model","subCategory":null,"role":null,"mainValue":"ps"}],"as":[{"category":"model","subCategory":null,"role":null,"mainValue":"as"}],"ascher":[{"category":"model","subCategory":null,"role":null,"mainValue":"as"}],"ct":[{"category":"model","subCategory":null,"role":null,"mainValue":"ct"}],"cut":[{"category":"model","subCategory":null,"role":null,"mainValue":"ct"}],"nv":[{"category":"model","subCategory":null,"role":null,"mainValue":"nv"}],"novelty":[{"category":"model","subCategory":null,"role":null,"mainValue":"nv"}],"ol":[{"category":"model","subCategory":null,"role":null,"mainValue":"ol"}],"octagonal":[{"category":"model","subCategory":null,"role":null,"mainValue":"ol"}],"rt":[{"category":"model","subCategory":null,"role":null,"mainValue":"rt"}],"rectangular":[{"category":"model","subCategory":null,"role":null,"mainValue":"rt"}],"sd":[{"category":"model","subCategory":null,"role":null,"mainValue":"sd"}],"shield":[{"category":"model","subCategory":null,"role":null,"mainValue":"sd"}],"sq":[{"category":"model","subCategory":null,"role":null,"mainValue":"sq"}],"square":[{"category":"model","subCategory":null,"role":null,"mainValue":"sq"}],"tl":[{"category":"model","subCategory":null,"role":null,"mainValue":"tl"}],"trilliant":[{"category":"model","subCategory":null,"role":null,"mainValue":"tl"}],"tr":[{"category":"model","subCategory":null,"role":null,"mainValue":"tr"}],"triangular":[{"category":"model","subCategory":null,"role":null,"mainValue":"tr"}],"d":[{"category":"color","subCategory":"white","role":"colorType=white","mainValue":"d"}],"e":[{"category":"color","subCategory":"white","role":"colorType=white","mainValue":"e"}],"f":[{"category":"color","subCategory":"white","role":"colorType=white","mainValue":"f"},{"category":"cut","subCategory":null,"role":null,"mainValue":"f"},{"category":"Polish","subCategory":null,"role":null,"mainValue":"f"},{"category":"Symmetry","subCategory":null,"role":null,"mainValue":"f"},{"category":"flour","subCategory":null,"role":null,"mainValue":"f"}],"g":[{"category":"color","subCategory":"white","role":"colorType=white","mainValue":"g"},{"category":"cut","subCategory":null,"role":null,"mainValue":"g"},{"category":"Polish","subCategory":null,"role":null,"mainValue":"g"},{"category":"Symmetry","subCategory":null,"role":null,"mainValue":"g"}],"h":[{"category":"color","subCategory":"white","role":"colorType=white","mainValue":"h"}],"i":[{"category":"color","subCategory":"white","role":"colorType=white","mainValue":"i"}],"j":[{"category":"color","subCategory":"white","role":"colorType=white","mainValue":"j"}],"k":[{"category":"color","subCategory":"white","role":"colorType=white","mainValue":"k"}],"l":[{"category":"color","subCategory":"white","role":"colorType=white","mainValue":"l"}],"m":[{"category":"color","subCategory":"white","role":"colorType=white","mainValue":"m"},{"category":"flour","subCategory":null,"role":null,"mainValue":"m"}],"n":[{"category":"color","subCategory":"white","role":"colorType=white","mainValue":"n"},{"category":"flour","subCategory":null,"role":null,"mainValue":"n"}],"fvy":[{"category":"color","subCategory":"yellow","role":"colorType=yellow","mainValue":"fvy"}],"fiy":[{"category":"color","subCategory":"yellow","role":"colorType=yellow","mainValue":"fiy"}],"fy":[{"category":"color","subCategory":"yellow","role":"colorType=yellow","mainValue":"fy"}],"fly":[{"category":"color","subCategory":"yellow","role":"colorType=yellow","mainValue":"fly"}],"y-z":[{"category":"color","subCategory":"yellow","role":"colorType=yellow","mainValue":"y-z"}],"w-x":[{"category":"color","subCategory":"yellow","role":"colorType=yellow","mainValue":"w-x"}],"fy-b":[{"category":"color","subCategory":"yellow","role":"colorType=yellow","mainValue":"fy-b"}],"fyb":[{"category":"color","subCategory":"yellow","role":"colorType=yellow","mainValue":"fyb"}],"fvlg":[{"category":"color","subCategory":"yellow","role":"colorType=yellow","mainValue":"fvlg"}],"fp":[{"category":"color","subCategory":"yellow","role":"colorType=yellow","mainValue":"fp"}],"flgy":[{"category":"color","subCategory":"yellow","role":"colorType=yellow","mainValue":"flgy"}],"flby":[{"category":"color","subCategory":"yellow","role":"colorType=yellow","mainValue":"flby"}],"flbgy":[{"category":"color","subCategory":"yellow","role":"colorType=yellow","mainValue":"flbgy"}],"fioy":[{"category":"color","subCategory":"yellow","role":"colorType=yellow","mainValue":"fioy"}],"fdyb":[{"category":"color","subCategory":"yellow","role":"colorType=yellow","mainValue":"fdyb"}],"yellow":[{"category":"color","subCategory":"yellow","role":"colorType=yellow","mainValue":"yellow"}],"yellow-brown":[{"category":"color","subCategory":"yellow","role":"colorType=yellow","mainValue":"yellow-brown"}],"yellow-green":[{"category":"color","subCategory":"yellow","role":"colorType=yellow","mainValue":"yellow-green"}],"yellow-orange":[{"category":"color","subCategory":"yellow","role":"colorType=yellow","mainValue":"yellow-orange"}],"fancy":[{"category":"color","subCategory":"yellow","role":"colorType=yellow","mainValue":"fancy"}],"colorType=fancy":[{"category":"color","subCategory":"yellow","role":"colorType=yellow","mainValue":"colorType=fancy"}],"blue":[{"category":"color","subCategory":"yellow","role":"colorType=yellow","mainValue":"blue"}],"blue-gray":[{"category":"color","subCategory":"yellow","role":"colorType=yellow","mainValue":"blue-gray"}],"blue-green":[{"category":"color","subCategory":"yellow","role":"colorType=yellow","mainValue":"blue-green"}],"brown":[{"category":"color","subCategory":"yellow","role":"colorType=yellow","mainValue":"brown"}],"brown-orange":[{"category":"color","subCategory":"yellow","role":"colorType=yellow","mainValue":"brown-orange"}],"brown-pink":[{"category":"color","subCategory":"yellow","role":"colorType=yellow","mainValue":"brown-pink"}],"brown-purple":[{"category":"color","subCategory":"yellow","role":"colorType=yellow","mainValue":"brown-purple"}],"gray":[{"category":"color","subCategory":"yellow","role":"colorType=yellow","mainValue":"gray"}],"gray-blue":[{"category":"color","subCategory":"yellow","role":"colorType=yellow","mainValue":"gray-blue"}],"gray-green":[{"category":"color","subCategory":"yellow","role":"colorType=yellow","mainValue":"gray-green"}],"green":[{"category":"color","subCategory":"yellow","role":"colorType=yellow","mainValue":"green"}],"green-blue":[{"category":"color","subCategory":"yellow","role":"colorType=yellow","mainValue":"green-blue"}],"green-gray":[{"category":"color","subCategory":"yellow","role":"colorType=yellow","mainValue":"green-gray"}],"green-yellow":[{"category":"color","subCategory":"yellow","role":"colorType=yellow","mainValue":"green-yellow"}],"orange":[{"category":"color","subCategory":"yellow","role":"colorType=yellow","mainValue":"orange"}],"orange-brown":[{"category":"color","subCategory":"yellow","role":"colorType=yellow","mainValue":"orange-brown"}],"orange-pink":[{"category":"color","subCategory":"yellow","role":"colorType=yellow","mainValue":"orange-pink"}],"orange-yellow":[{"category":"color","subCategory":"yellow","role":"colorType=yellow","mainValue":"orange-yellow"}],"orangy-brown":[{"category":"color","subCategory":"yellow","role":"colorType=yellow","mainValue":"orangy-brown"}],"pink":[{"category":"color","subCategory":"yellow","role":"colorType=yellow","mainValue":"pink"}],"pink-brown":[{"category":"color","subCategory":"yellow","role":"colorType=yellow","mainValue":"pink-brown"}],"pink-purple":[{"category":"color","subCategory":"yellow","role":"colorType=yellow","mainValue":"pink-purple"}],"purple":[{"category":"color","subCategory":"yellow","role":"colorType=yellow","mainValue":"purple"}],"purple-pink":[{"category":"color","subCategory":"yellow","role":"colorType=yellow","mainValue":"purple-pink"}],"red":[{"category":"color","subCategory":"yellow","role":"colorType=yellow","mainValue":"red"}],"violet-gray":[{"category":"color","subCategory":"yellow","role":"colorType=yellow","mainValue":"violet-gray"}],"white":[{"category":"color","subCategory":"yellow","role":"colorType=yellow","mainValue":"white"}],"vvs1":[{"category":"clarity","subCategory":null,"role":null,"mainValue":"vvs1"}],"vvs2":[{"category":"clarity","subCategory":null,"role":null,"mainValue":"vvs2"}],"vs1":[{"category":"clarity","subCategory":null,"role":null,"mainValue":"vs1"}],"vs2":[{"category":"clarity","subCategory":null,"role":null,"mainValue":"vs2"}],"si1":[{"category":"clarity","subCategory":null,"role":null,"mainValue":"si1"}],"si2":[{"category":"clarity","subCategory":null,"role":null,"mainValue":"si2"}],"si3":[{"category":"clarity","subCategory":null,"role":null,"mainValue":"si3"}],"i1":[{"category":"clarity","subCategory":null,"role":null,"mainValue":"i1"}],"i2":[{"category":"clarity","subCategory":null,"role":null,"mainValue":"i2"}],"ex":[{"category":"cut","subCategory":null,"role":null,"mainValue":"ex"},{"category":"Polish","subCategory":null,"role":null,"mainValue":"ex"},{"category":"Symmetry","subCategory":null,"role":null,"mainValue":"ex"}],"excellent":[{"category":"cut","subCategory":null,"role":null,"mainValue":"ex"},{"category":"Polish","subCategory":null,"role":null,"mainValue":"ex"},{"category":"Symmetry","subCategory":null,"role":null,"mainValue":"ex"}],"exc":[{"category":"cut","subCategory":null,"role":null,"mainValue":"ex"},{"category":"Polish","subCategory":null,"role":null,"mainValue":"ex"},{"category":"Symmetry","subCategory":null,"role":null,"mainValue":"ex"}],"x":[{"category":"cut","subCategory":null,"role":null,"mainValue":"ex"},{"category":"Polish","subCategory":null,"role":null,"mainValue":"ex"},{"category":"Symmetry","subCategory":null,"role":null,"mainValue":"ex"}],"vg+":[{"category":"cut","subCategory":null,"role":null,"mainValue":"ex"},{"category":"cut","subCategory":null,"role":null,"mainValue":"vg"},{"category":"Polish","subCategory":null,"role":null,"mainValue":"ex"},{"category":"Polish","subCategory":null,"role":null,"mainValue":"vg"},{"category":"Symmetry","subCategory":null,"role":null,"mainValue":"ex"},{"category":"Symmetry","subCategory":null,"role":null,"mainValue":"vg"}],"gd+":[{"category":"cut","subCategory":null,"role":null,"mainValue":"ex"},{"category":"cut","subCategory":null,"role":null,"mainValue":"vg"},{"category":"cut","subCategory":null,"role":null,"mainValue":"g"},{"category":"Polish","subCategory":null,"role":null,"mainValue":"ex"},{"category":"Polish","subCategory":null,"role":null,"mainValue":"vg"},{"category":"Polish","subCategory":null,"role":null,"mainValue":"g"},{"category":"Symmetry","subCategory":null,"role":null,"mainValue":"ex"},{"category":"Symmetry","subCategory":null,"role":null,"mainValue":"vg"},{"category":"Symmetry","subCategory":null,"role":null,"mainValue":"g"}],"vg":[{"category":"cut","subCategory":null,"role":null,"mainValue":"vg"},{"category":"Polish","subCategory":null,"role":null,"mainValue":"vg"},{"category":"Symmetry","subCategory":null,"role":null,"mainValue":"vg"}],"very good":[{"category":"cut","subCategory":null,"role":null,"mainValue":"vg"},{"category":"Polish","subCategory":null,"role":null,"mainValue":"vg"},{"category":"Symmetry","subCategory":null,"role":null,"mainValue":"vg"}],"good":[{"category":"cut","subCategory":null,"role":null,"mainValue":"g"},{"category":"Polish","subCategory":null,"role":null,"mainValue":"g"},{"category":"Symmetry","subCategory":null,"role":null,"mainValue":"g"}],"gd":[{"category":"cut","subCategory":null,"role":null,"mainValue":"g"},{"category":"Polish","subCategory":null,"role":null,"mainValue":"g"},{"category":"Symmetry","subCategory":null,"role":null,"mainValue":"g"}],"fair":[{"category":"cut","subCategory":null,"role":null,"mainValue":"f"},{"category":"Polish","subCategory":null,"role":null,"mainValue":"f"},{"category":"Symmetry","subCategory":null,"role":null,"mainValue":"f"}],"fr":[{"category":"cut","subCategory":null,"role":null,"mainValue":"f"},{"category":"Polish","subCategory":null,"role":null,"mainValue":"f"},{"category":"Symmetry","subCategory":null,"role":null,"mainValue":"f"}],"p":[{"category":"cut","subCategory":null,"role":null,"mainValue":"p"},{"category":"Polish","subCategory":null,"role":null,"mainValue":"p"},{"category":"Symmetry","subCategory":null,"role":null,"mainValue":"p"}],"none":[{"category":"flour","subCategory":null,"role":null,"mainValue":"n"}],"nn":[{"category":"flour","subCategory":null,"role":null,"mainValue":"n"}],"faint":[{"category":"flour","subCategory":null,"role":null,"mainValue":"f"}],"fnt":[{"category":"flour","subCategory":null,"role":null,"mainValue":"f"}],"medium":[{"category":"flour","subCategory":null,"role":null,"mainValue":"m"}],"med":[{"category":"flour","subCategory":null,"role":null,"mainValue":"m"}],"s":[{"category":"flour","subCategory":null,"role":null,"mainValue":"s"}],"strong":[{"category":"flour","subCategory":null,"role":null,"mainValue":"s"}],"st":[{"category":"flour","subCategory":null,"role":null,"mainValue":"s"}],"vs":[{"category":"flour","subCategory":null,"role":null,"mainValue":"vs"}],"very strong":[{"category":"flour","subCategory":null,"role":null,"mainValue":"vs"}],"gia":[{"category":"lab","subCategory":null,"role":null,"mainValue":"gia"}],"igi":[{"category":"lab","subCategory":null,"role":null,"mainValue":"igi"}],"hrd":[{"category":"lab","subCategory":null,"role":null,"mainValue":"hrd"}],"fm":[{"category":"lab","subCategory":null,"role":null,"mainValue":"fm"}],"forevermark":[{"category":"lab","subCategory":null,"role":null,"mainValue":"fm"}],"fmx":[{"category":"lab","subCategory":null,"role":null,"mainValue":"fm"}],"hk":[{"category":"location","subCategory":null,"role":null,"mainValue":"hk"}],"hong kong":[{"category":"location","subCategory":null,"role":null,"mainValue":"hk"}],"il":[{"category":"location","subCategory":null,"role":null,"mainValue":"il"}],"israel":[{"category":"location","subCategory":null,"role":null,"mainValue":"il"}],"ny":[{"category":"location","subCategory":null,"role":null,"mainValue":"ny"}],"newyork":[{"category":"location","subCategory":null,"role":null,"mainValue":"ny"}],"us":[{"category":"location","subCategory":null,"role":null,"mainValue":"ny"},{"category":"location","subCategory":null,"role":null,"mainValue":"la"}],"usa":[{"category":"location","subCategory":null,"role":null,"mainValue":"ny"},{"category":"location","subCategory":null,"role":null,"mainValue":"la"}],"la":[{"category":"location","subCategory":null,"role":null,"mainValue":"la"}],"los angeles":[{"category":"location","subCategory":null,"role":null,"mainValue":"la"}],"jc":[{"category":"location","subCategory":null,"role":null,"mainValue":"jc"}]};
    this.activeValues='';
    this.moreValues='';
}

var activeSmartSearchManager= new smartSearchManager();


activeSmartSearchManager.clickInputManually = function () {
    var elm=$('#generalSearchInput')[0];
    activeSmartSearchManager.getValues(elm);
}

activeSmartSearchManager.getValues = function (elm) {
    var elmValueArray=elm.value.toLowerCase();
    elmValueArray=elm.value.split(' ');
    elmValueArray=activeMainTool.removeValuesFromArray(elmValueArray,'');
    var content='';
    var multipleValue=false; //if true it's like 'vg' on multiple categories
    var valuesArray=[];
      console.log(elmValueArray);
      if(elmValueArray.length===1 && typeof activeSmartSearchManager.values[elm.value]==='undefined'){ // for example: 'g' 
          var countOfMultipleValue=0;
          for(var key in activeSmartSearchManager.values){
                for(var j=0;j<elmValueArray.length;j++){
                    if(typeof activeSmartSearchManager.values[elmValueArray[j]]!=='undefined' && activeSmartSearchManager.values[elmValueArray[j]].length>1){
                        multipleValue=true;
                    }
                    if(key.indexOf(elmValueArray[j])!==-1){
                        countOfMultipleValue++;
                        for(var i=0;i<activeSmartSearchManager.values[key].length;i++){
                            if(typeof valuesArray[activeSmartSearchManager.values[key][i].category]==='undefined'){
                                valuesArray[activeSmartSearchManager.values[key][i].category]=[];
                            }
                            valuesArray[activeSmartSearchManager.values[key][i].category].push(activeSmartSearchManager.values[key][i].mainValue.toLowerCase());
                            //console.log(activeSmartSearchManager.values[key][i]);
                            //content+=activeSmartSearchManager.values[key][i].category+'='+activeSmartSearchManager.values[key][i].mainValue.toLowerCase()+'&';
                        }
                    }
                }
            }
        if(countOfMultipleValue>1){
            multipleValue=true;
        }
/*      var lowerCaseValues = elm.value.toLowerCase();
      var elmValueArray = lowerCaseValues.split(' ');
      if(elmValueArray.length===1 && typeof activeSmartSearchManager.values[lowerCaseValues]==='undefined'){
            console.log("value not found");
            return true;
*/
      }
      else{
      
      
      for(var j=0;j<elmValueArray.length;j++){ // for example: 'pink' 
          if(typeof activeSmartSearchManager.values[elmValueArray[j]]==='undefined'){
              break;
          }
          if(activeSmartSearchManager.values[elmValueArray[j]].length>1){
              multipleValue=true;
          }
            for(var i=0;i<activeSmartSearchManager.values[elmValueArray[j]].length;i++){
                if(typeof valuesArray[activeSmartSearchManager.values[elmValueArray[j]][i].category]==='undefined'){
                                valuesArray[activeSmartSearchManager.values[elmValueArray[j]][i].category]=[];
                            }
                            valuesArray[activeSmartSearchManager.values[elmValueArray[j]][i].category].push(activeSmartSearchManager.values[elmValueArray[j]][i].mainValue.toLowerCase());
                            //console.log(activeSmartSearchManager.values[elmValueArray[j]][i]);
                //content+=activeSmartSearchManager.values[elmValueArray[j]][i].category+'='+activeSmartSearchManager.values[elmValueArray[j]][i].mainValue.toLowerCase()+'&';
            }
        }
        for(var j=0;j<elmValueArray.length;j++){ // like 'pink g';
        if(typeof activeSmartSearchManager.values[elmValueArray[j]]==='undefined'){
            for(var key in activeSmartSearchManager.values){
                
                    for(var i=0;i<activeSmartSearchManager.values[key].length;i++){
                    if(key.indexOf(elmValueArray[j])!==-1){
                        if(typeof valuesArray[activeSmartSearchManager.values[key][i].category]==='undefined'){
                                valuesArray[activeSmartSearchManager.values[key][i].category]=[];
                            }
                            valuesArray[activeSmartSearchManager.values[key][i].category].push(activeSmartSearchManager.values[key][i].mainValue.toLowerCase());
                            //console.log(activeSmartSearchManager.values[key][i]);
                        //content+=activeSmartSearchManager.values[key][i].category+'='+activeSmartSearchManager.values[key][i].mainValue.toLowerCase()+'&';
                    }
                }
                }
            }
            
        }
    }
    console.log(valuesArray);
    for(var key in valuesArray){
        content+=key+'='+valuesArray[key].toString().toUpperCase()+'&';
    }
      content=content.slice(0, -1);
      content+=activeSmartSearchManager.moreValues+'&multipleValue='+multipleValue;
      activeSmartSearchManager.activeValues=content;
      if(activeMainPage.pageId===1){ //search
          var filterQueryId= Math.floor((Math.random() * 1000000) + 1);
          //activeMainPage.clearAllFilters();
          activeMainPage.activeFilterQueryId=filterQueryId;
          activeMainPage.getFiltersResults(content,filterQueryId,true);
      }
};

activeSmartSearchManager.appendValuesInInputs = function (valuesArray) {
    var arrangeFiltersString='';
    for (var key in valuesArray) {
        if(arrangeFiltersArray[key]!==',')
        arrangeFiltersString += arrangeFiltersArray[key] + ' ';
    }
    $('#generalSearchInput').val(arrangeFiltersString)
    console.log(valuesArray);
}